
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A tutorial demonstrating workflow and project management in NOMAD
">
      
      
        <meta name="author" content="FAIRmat consortium">
      
      
        <link rel="canonical" href="https://fairmat-nfdi.github.io/nomad-tutorial-workflows/workflows/">
      
      
        <link rel="prev" href="../custom/">
      
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Part 4 - Custom Workflows - NOMAD Tutorial Workflows</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Titillium Web";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#part-4-creating-custom-workflows-to-link-multiple-uploads" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="NOMAD Tutorial Workflows" class="md-header__button md-logo" aria-label="NOMAD Tutorial Workflows" data-md-component="logo">
      
  <img src="../assets/nomad-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NOMAD Tutorial Workflows
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part 4 - Custom Workflows
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/FAIRmat-NFDI/nomad-tutorial-workflows" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="NOMAD Tutorial Workflows" class="md-nav__button md-logo" aria-label="NOMAD Tutorial Workflows" data-md-component="logo">
      
  <img src="../assets/nomad-logo.png" alt="logo">

    </a>
    NOMAD Tutorial Workflows
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/FAIRmat-NFDI/nomad-tutorial-workflows" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 1 - Core Functionalities
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 2 - Python API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 3 - Custom Entries
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Part 4 - Custom Workflows
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Part 4 - Custom Workflows
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-you-will-learn" class="md-nav__link">
    <span class="md-ellipsis">
      🎯 What You Will Learn
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-plots-and-hierarchical-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      🧩 Custom Plots and Hierarchical Workflows
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plotting-entry" class="md-nav__link">
    <span class="md-ellipsis">
      Plotting Entry
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-overarching-project-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the overarching project workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-graph-representation-of-the-project-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a graph representation of the project workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-the-workflow-yaml" class="md-nav__link">
    <span class="md-ellipsis">
      Generate the workflow yaml
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-you-will-learn" class="md-nav__link">
    <span class="md-ellipsis">
      🎯 What You Will Learn
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-plots-and-hierarchical-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      🧩 Custom Plots and Hierarchical Workflows
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plotting-entry" class="md-nav__link">
    <span class="md-ellipsis">
      Plotting Entry
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-overarching-project-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the overarching project workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-graph-representation-of-the-project-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a graph representation of the project workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-the-workflow-yaml" class="md-nav__link">
    <span class="md-ellipsis">
      Generate the workflow yaml
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="part-4-creating-custom-workflows-to-link-multiple-uploads">Part 4: Creating Custom Workflows to Link Multiple Uploads<a class="headerlink" href="#part-4-creating-custom-workflows-to-link-multiple-uploads" title="Permanent link">&para;</a></h1>
<h2 id="what-you-will-learn">🎯 What You Will Learn<a class="headerlink" href="#what-you-will-learn" title="Permanent link">&para;</a></h2>
<ul>
<li>How to define and create a <strong>custom workflow</strong> entry in NOMAD</li>
<li>How to use the <strong><code>nomad-utility-workflows</code></strong> module to generate a workflow YAML</li>
<li>How to connect individual uploads as <strong>linked tasks</strong> in a workflow graph</li>
<li>How to add <strong>custom plots</strong> to your project overview</li>
<li>How to obtain a <strong>DOI</strong> for your complete workflow</li>
</ul>
<p>You’ll finalize the example project by creating a structured, interactive representation of the entire research process&mdash;from input data through all processing steps to final analysis.</p>
<hr />
<h2 id="custom-plots-and-hierarchical-workflows">🧩 Custom Plots and Hierarchical Workflows<a class="headerlink" href="#custom-plots-and-hierarchical-workflows" title="Permanent link">&para;</a></h2>
<p>Workflows are an important aspect of data as they explain how the data was generated and are essential for reproducibility. In this sense, a workflow has already happened and has produced input and output data that are linked through tasks that have been performed. This often is also referred to as data provenance or provenance graph.</p>
<p><strong>Challenge:</strong></p>
<ol>
<li>You now need to create an overarching workflow that documents the steps executed in your project.</li>
<li>You also want to showcase some of the analysis plots that you created from the data generated by the workflow.</li>
</ol>
<p><strong>Your Solution:</strong></p>
<ol>
<li>Use NOMAD's plotly functionalities to create entries with custom plots on the overview page.</li>
<li>Use <code>nomad-utility-workflows</code> to generate a workflow YAML for the overarching workflow.</li>
</ol>
<h2 id="plotting-entry">Plotting Entry<a class="headerlink" href="#plotting-entry" title="Permanent link">&para;</a></h2>
<p>You have performed some vibrational analysis of the DFT configurations obtained from your simulations. The results are shown below. Create a file <code>result-vibrational-analysis-DFT.csv</code> to store the results:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>electron_density,oh_stretch_frequency
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>e/A^3,1/cm
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>0.0102,3601.
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>0.0125,3554.
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>0.0140,3507.
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>0.0158,3473.
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>0.0169,3448.
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>0.0184,3392.
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>0.0195,3355.
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>0.0208,3321.
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>0.0223,3289.
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>0.0236,3267.
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>0.0248,3230.
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>0.0261,3194.
</code></pre></div>
<p>NOMAD has a variety of tools, including plotting functionalities, that can be utilized when defining a custom schema. Let's create an ELN entry that will plot the results of the vibrational analysis.</p>
<div class="admonition warning">
<p class="admonition-title">Attention</p>
<p>Understanding the details of the customized plotting schema below is beyond the scope of this tutorial, and is not necessarily the adviced route for the most robust plotting customization. The important take away is that you can in principal create you own plotting schema. In this case we have done so to create a very basic plot within an entry.</p>
</div>
<p>Create a file <code>vibrational_plot_schema.archive.yaml</code> with the following content:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="s">&quot;definitions&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">This is a parser for vibrational analysis data in the .csv format</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="s">&quot;sections&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="s">&quot;Vibrational_Analysis&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">      </span><span class="s">&quot;base_sections&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nomad.datamodel.data.EntryData</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nomad.parsing.tabular.TableData</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nomad.datamodel.metainfo.plot.PlotSection</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">      </span><span class="s">&quot;quantities&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">        </span><span class="s">&quot;data_file&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">          </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">          </span><span class="s">&quot;descritpion&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload your .csv data file</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">          </span><span class="s">&quot;m_annotations&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">            </span><span class="s">&quot;eln&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">              </span><span class="s">&quot;component&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FileEditQuantity</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">            </span><span class="s">&quot;browser&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">              </span><span class="s">&quot;adaptor&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RawFileAdaptor</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">            </span><span class="s">&quot;tabular_parser&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">              </span><span class="s">&quot;parsing_options&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">                </span><span class="s">&quot;comment&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;#&quot;</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">                </span><span class="s">&quot;skiprows&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">]</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">              </span><span class="s">&quot;mapping_options&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;mapping_mode&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">column</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">                  </span><span class="s">&quot;file_mode&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">current_entry</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">                  </span><span class="s">&quot;sections&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">                    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;#root&quot;</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">        </span><span class="s">&quot;Electron_Density&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">          </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">np.float64</span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">          </span><span class="s">&quot;shape&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;*&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">          </span><span class="s">&quot;m_annotations&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">            </span><span class="s">&quot;tabular&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">              </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electron_density</span>
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="w">        </span><span class="s">&quot;OH_Stretch_Frequency&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="w">          </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">np.float64</span>
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="w">          </span><span class="s">&quot;shape&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;*&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a><span class="w">          </span><span class="s">&quot;m_annotations&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a><span class="w">            </span><span class="s">&quot;tabular&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a><span class="w">              </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">oh_stretch_frequency</span>
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a><span class="w">      </span><span class="s">&quot;m_annotations&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a><span class="w">        </span><span class="s">&quot;plotly_graph_object&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a><span class="w">          </span><span class="s">&quot;data&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a><span class="w">            </span><span class="s">&quot;x&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;#Electron_Density&quot;</span>
<a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a><span class="w">            </span><span class="s">&quot;y&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;#OH_Stretch_Frequency&quot;</span>
<a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a><span class="w">          </span><span class="s">&quot;layout&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a><span class="w">            </span><span class="s">&quot;title&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Vibrational Analysis</span>
</code></pre></div>
<p>Here we will not describe in detail the plotting annotations. Rather, this serves as a simple demonstration that custom plotting is possible. In practice, there are various routes for creating custom visualizations. See <a href="https://nomad-lab.eu/prod/v1/test/docs/reference/annotations.html#annotations" target="blank">NOMAD Docs &gt; Reference &gt; Annotations</a> for more information.</p>
<p>To create an entry according to this schema, create the file <code>vibrational_analysis.archive.yaml</code> with the following contents:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="s">&quot;data&quot;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span><span class="s">&quot;m_def&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;../upload/raw/vibrational_plot_schema.archive.yaml#Vibrational_Analysis&quot;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="s">&quot;data_file&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;result-vibrational-analysis-DFT.csv&quot;</span>
</code></pre></div>
<p>Alternatively, you can download all 3 files here:</p>
<p><a class="md-button" href="../assets/vibrational-analysis-files.zip" target="_blank">Download Vibrational Analysis Files</a></p>
<p>Now we can once again use either the GUI or the API to upload, edit metadata (add a title and link to the dataset), and publish. We will not repeat the steps here, but encourage you to try to repeat the API steps on your own. You can also download the prefilled <code>Vibrational_Analysis.ipynb</code> to perform these steps:</p>
<p><a class="md-button" href="../assets/Vibrational_Analysis_Entry.ipynb" target="_blank">Download Vibrational Analysis Upload and Publish Notebook</a></p>
<p>After you have completed the publishing, save the <code>entry_id</code> to your <code>PIDs.json</code>, as we will need it in the final section of the tutorial below:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="nt">&quot;upload_ids&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="nt">&quot;md-workflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;your md workflow upload id from Part 1&gt;&quot;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">  </span><span class="nt">&quot;entry_ids&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="nt">&quot;md-workflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;your md workflow entry id from Part 1&gt;&quot;</span><span class="p">,</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="nt">&quot;DFT&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;&lt;your list of dft entry ids from above&gt;&quot;</span><span class="p">],</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="nt">&quot;setup-workflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;your setup workflow entry id from Part 3&gt;&quot;</span><span class="p">,</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;your workflow parameters entry id from Part 3&gt;&quot;</span><span class="p">,</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">    </span><span class="nt">&quot;analysis&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;copy the vibrational analysis entry id here&gt;&quot;</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">  </span><span class="nt">&quot;dataset_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;your dataset id&gt;&quot;</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="p">{</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">  </span><span class="nt">&quot;upload_ids&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="nt">&quot;md-workflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;your md workflow upload id from Part 1&gt;&quot;</span><span class="p">,</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="nt">&quot;DFT&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;&lt;your list of dft upload ids from above&gt;&quot;</span><span class="p">],</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="nt">&quot;setup-workflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;your setup workflow upload id here&gt;&quot;</span><span class="p">,</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="nt">&quot;analysis&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;copy the vibrational analysis upload id here&gt;&quot;</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">     </span><span class="p">},</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">  </span><span class="nt">&quot;entry_ids&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span><span class="nt">&quot;md-workflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;your md workflow entry id from Part 1&gt;&quot;</span><span class="p">,</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">    </span><span class="nt">&quot;DFT&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;&lt;your list of dft entry ids from above&gt;&quot;</span><span class="p">],</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">    </span><span class="nt">&quot;setup-workflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;your setup workflow entry id here&gt;&quot;</span><span class="p">,</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">    </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;your workflow parameters entry id here&gt;&quot;</span><span class="p">,</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">    </span><span class="nt">&quot;analysis&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;copy the vibrational analysis entry id here&gt;&quot;</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">  </span><span class="nt">&quot;dataset_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;your dataset id&gt;&quot;</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="p">}</span>
</code></pre></div>
<h2 id="creating-the-overarching-project-workflow">Creating the overarching project workflow<a class="headerlink" href="#creating-the-overarching-project-workflow" title="Permanent link">&para;</a></h2>
<p>Now that all the individual tasks and sub-workflows for the project are stored in the NOMAD repository, we need to create an overarching workflow to connect these components. The final workflow graph should look as follows:</p>
<div class="click-zoom">
    <label>
        <input type="checkbox">
        <img src="../assets/workflow_graph_input.png" alt="Networkx Workflow Graph for Input" width="100%" title="Click to zoom in">
    </label>
</div>

<p>As in Part 3, we could create the necessary <code>archive.yaml</code> manually. However, there are many cases where this can be quite tedious and require detailed knowledge of the NOMAD schema. For that reason <code>nomad-utility-workflows</code> includes some tools for automating the generation of this file. In the following, we will demonstrate the basic functionalities of these tools. For more details see <a href="https://fairmat-nfdi.github.io/nomad-utility-workflows/index.html" target="blank"><code>nomad-utility-workflow</code> Docs</a>.</p>
<h2 id="creating-a-graph-representation-of-the-project-workflow">Creating a graph representation of the project workflow<a class="headerlink" href="#creating-a-graph-representation-of-the-project-workflow" title="Permanent link">&para;</a></h2>
<p>Create a new notebook <code>Generate_Workflow_Yaml.ipynb</code> to work step by step or download the prefilled notebook:</p>
<p><a class="md-button" href="../assets/Generate_Workflow_Yaml.ipynb" target="_blank">Download Generate_Workflow_Yaml.ipynb</a></p>
<p>Make the imports:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">gravis</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gv</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">networkx</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">nx</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">nomad_utility_workflows.utils.workflows</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>    <span class="n">NodeAttributes</span><span class="p">,</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    <span class="n">NodeAttributesUniverse</span><span class="p">,</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>    <span class="n">build_nomad_workflow</span><span class="p">,</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>    <span class="n">nodes_to_graph</span><span class="p">,</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="p">)</span>
</code></pre></div>
<p>Load the saved PIDs:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;PIDs.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>    <span class="n">pids_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="n">entry_ids</span> <span class="o">=</span> <span class="n">pids_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;entry_ids&#39;</span><span class="p">)</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="n">upload_ids</span> <span class="o">=</span> <span class="n">pids_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;upload_ids&#39;</span><span class="p">)</span>
</code></pre></div>
<p>Create a dictionary with inputs, outputs, and tasks as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">node_attributes</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>    <span class="mi">0</span><span class="p">:</span> <span class="n">NodeAttributes</span><span class="p">(</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Workflow Parameters&#39;</span><span class="p">,</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>        <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;input&#39;</span><span class="p">,</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>        <span class="n">path_info</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>            <span class="s1">&#39;entry_id&#39;</span><span class="p">:</span> <span class="n">entry_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;parameters&#39;</span><span class="p">),</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>            <span class="s1">&#39;upload_id&#39;</span><span class="p">:</span> <span class="n">upload_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;setup-workflow&#39;</span><span class="p">),</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>            <span class="s1">&#39;mainfile_path&#39;</span><span class="p">:</span> <span class="s1">&#39;workflow_parameters.archive.yaml&#39;</span><span class="p">,</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>            <span class="s1">&#39;archive_path&#39;</span><span class="p">:</span> <span class="s1">&#39;data&#39;</span><span class="p">,</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>        <span class="p">},</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>    <span class="p">),</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>    <span class="mi">1</span><span class="p">:</span> <span class="n">NodeAttributes</span><span class="p">(</span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;MD Setup&#39;</span><span class="p">,</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>        <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;workflow&#39;</span><span class="p">,</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>        <span class="n">path_info</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>            <span class="s1">&#39;entry_id&#39;</span><span class="p">:</span> <span class="n">entry_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;setup-workflow&#39;</span><span class="p">),</span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>            <span class="s1">&#39;upload_id&#39;</span><span class="p">:</span> <span class="n">upload_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;setup-workflow&#39;</span><span class="p">),</span>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>            <span class="s1">&#39;mainfile_path&#39;</span><span class="p">:</span> <span class="s1">&#39;setup_workflow.archive.yaml&#39;</span><span class="p">,</span>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>        <span class="p">},</span>
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>        <span class="n">in_edge_nodes</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>    <span class="p">),</span>
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>    <span class="mi">2</span><span class="p">:</span> <span class="n">NodeAttributes</span><span class="p">(</span>
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;MD Equilibration&#39;</span><span class="p">,</span>
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>        <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;workflow&#39;</span><span class="p">,</span>
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>        <span class="n">path_info</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>            <span class="s1">&#39;entry_id&#39;</span><span class="p">:</span> <span class="n">entry_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;md-workflow&#39;</span><span class="p">),</span>
<a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>            <span class="s1">&#39;upload_id&#39;</span><span class="p">:</span> <span class="n">upload_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;md-workflow&#39;</span><span class="p">),</span>
<a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>            <span class="s1">&#39;mainfile_path&#39;</span><span class="p">:</span> <span class="s1">&#39;workflow.archive.yaml&#39;</span><span class="p">,</span>
<a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>        <span class="p">},</span>
<a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a>        <span class="n">in_edge_nodes</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a>    <span class="p">),</span>
<a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a>    <span class="mi">3</span><span class="p">:</span> <span class="n">NodeAttributes</span><span class="p">(</span>
<a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a>        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;DFT-1&#39;</span><span class="p">,</span>
<a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a>        <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;workflow&#39;</span><span class="p">,</span>
<a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a>        <span class="n">entry_type</span><span class="o">=</span><span class="s1">&#39;simulation&#39;</span><span class="p">,</span>
<a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a>        <span class="n">path_info</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a>            <span class="s1">&#39;entry_id&#39;</span><span class="p">:</span> <span class="n">entry_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;DFT&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a>            <span class="s1">&#39;upload_id&#39;</span><span class="p">:</span> <span class="n">upload_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;DFT&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a>            <span class="s1">&#39;mainfile_path&#39;</span><span class="p">:</span> <span class="s1">&#39;aims.out&#39;</span>
<a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a>            <span class="p">},</span>
<a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a>        <span class="n">in_edge_nodes</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a>        <span class="n">out_edge_nodes</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
<a id="__codelineno-7-43" name="__codelineno-7-43" href="#__codelineno-7-43"></a>    <span class="p">),</span>
<a id="__codelineno-7-44" name="__codelineno-7-44" href="#__codelineno-7-44"></a>    <span class="mi">4</span><span class="p">:</span> <span class="n">NodeAttributes</span><span class="p">(</span>
<a id="__codelineno-7-45" name="__codelineno-7-45" href="#__codelineno-7-45"></a>        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;DFT-2&#39;</span><span class="p">,</span>
<a id="__codelineno-7-46" name="__codelineno-7-46" href="#__codelineno-7-46"></a>        <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;task&#39;</span><span class="p">,</span>
<a id="__codelineno-7-47" name="__codelineno-7-47" href="#__codelineno-7-47"></a>        <span class="n">entry_type</span><span class="o">=</span><span class="s1">&#39;simulation&#39;</span><span class="p">,</span>
<a id="__codelineno-7-48" name="__codelineno-7-48" href="#__codelineno-7-48"></a>        <span class="n">path_info</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-7-49" name="__codelineno-7-49" href="#__codelineno-7-49"></a>            <span class="s1">&#39;entry_id&#39;</span><span class="p">:</span> <span class="n">entry_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;DFT&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-7-50" name="__codelineno-7-50" href="#__codelineno-7-50"></a>            <span class="s1">&#39;upload_id&#39;</span><span class="p">:</span> <span class="n">upload_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;DFT&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-7-51" name="__codelineno-7-51" href="#__codelineno-7-51"></a>            <span class="s1">&#39;mainfile_path&#39;</span><span class="p">:</span> <span class="s1">&#39;aims.out&#39;</span>
<a id="__codelineno-7-52" name="__codelineno-7-52" href="#__codelineno-7-52"></a>            <span class="p">},</span>
<a id="__codelineno-7-53" name="__codelineno-7-53" href="#__codelineno-7-53"></a>        <span class="n">in_edge_nodes</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-7-54" name="__codelineno-7-54" href="#__codelineno-7-54"></a>        <span class="n">out_edge_nodes</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
<a id="__codelineno-7-55" name="__codelineno-7-55" href="#__codelineno-7-55"></a>    <span class="p">),</span>
<a id="__codelineno-7-56" name="__codelineno-7-56" href="#__codelineno-7-56"></a>    <span class="mi">5</span><span class="p">:</span> <span class="n">NodeAttributes</span><span class="p">(</span>
<a id="__codelineno-7-57" name="__codelineno-7-57" href="#__codelineno-7-57"></a>        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;DFT-3&#39;</span><span class="p">,</span>
<a id="__codelineno-7-58" name="__codelineno-7-58" href="#__codelineno-7-58"></a>        <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;task&#39;</span><span class="p">,</span>
<a id="__codelineno-7-59" name="__codelineno-7-59" href="#__codelineno-7-59"></a>        <span class="n">entry_type</span><span class="o">=</span><span class="s1">&#39;simulation&#39;</span><span class="p">,</span>
<a id="__codelineno-7-60" name="__codelineno-7-60" href="#__codelineno-7-60"></a>        <span class="n">path_info</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-7-61" name="__codelineno-7-61" href="#__codelineno-7-61"></a>            <span class="s1">&#39;entry_id&#39;</span><span class="p">:</span> <span class="n">entry_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;DFT&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-7-62" name="__codelineno-7-62" href="#__codelineno-7-62"></a>            <span class="s1">&#39;upload_id&#39;</span><span class="p">:</span> <span class="n">upload_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;DFT&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-7-63" name="__codelineno-7-63" href="#__codelineno-7-63"></a>            <span class="s1">&#39;mainfile_path&#39;</span><span class="p">:</span> <span class="s1">&#39;aims.out&#39;</span>
<a id="__codelineno-7-64" name="__codelineno-7-64" href="#__codelineno-7-64"></a>            <span class="p">},</span>
<a id="__codelineno-7-65" name="__codelineno-7-65" href="#__codelineno-7-65"></a>        <span class="n">in_edge_nodes</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-7-66" name="__codelineno-7-66" href="#__codelineno-7-66"></a>        <span class="n">out_edge_nodes</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
<a id="__codelineno-7-67" name="__codelineno-7-67" href="#__codelineno-7-67"></a>    <span class="p">),</span>
<a id="__codelineno-7-68" name="__codelineno-7-68" href="#__codelineno-7-68"></a>    <span class="mi">6</span><span class="p">:</span> <span class="n">NodeAttributes</span><span class="p">(</span>
<a id="__codelineno-7-69" name="__codelineno-7-69" href="#__codelineno-7-69"></a>        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Vibrational Analysis&#39;</span><span class="p">,</span>
<a id="__codelineno-7-70" name="__codelineno-7-70" href="#__codelineno-7-70"></a>        <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;output&#39;</span><span class="p">,</span>
<a id="__codelineno-7-71" name="__codelineno-7-71" href="#__codelineno-7-71"></a>        <span class="n">path_info</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-7-72" name="__codelineno-7-72" href="#__codelineno-7-72"></a>            <span class="s1">&#39;entry_id&#39;</span><span class="p">:</span> <span class="n">entry_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;analysis&#39;</span><span class="p">),</span>
<a id="__codelineno-7-73" name="__codelineno-7-73" href="#__codelineno-7-73"></a>            <span class="s1">&#39;upload_id&#39;</span><span class="p">:</span> <span class="n">upload_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;analysis&#39;</span><span class="p">),</span>
<a id="__codelineno-7-74" name="__codelineno-7-74" href="#__codelineno-7-74"></a>            <span class="s1">&#39;mainfile_path&#39;</span><span class="p">:</span> <span class="s1">&#39;vibrational_analysis.archive.yaml&#39;</span><span class="p">,</span>
<a id="__codelineno-7-75" name="__codelineno-7-75" href="#__codelineno-7-75"></a>            <span class="s1">&#39;archive_path&#39;</span><span class="p">:</span> <span class="s1">&#39;data&#39;</span><span class="p">,</span>
<a id="__codelineno-7-76" name="__codelineno-7-76" href="#__codelineno-7-76"></a>        <span class="p">},</span>
<a id="__codelineno-7-77" name="__codelineno-7-77" href="#__codelineno-7-77"></a>    <span class="p">),</span>
<a id="__codelineno-7-78" name="__codelineno-7-78" href="#__codelineno-7-78"></a><span class="p">}</span>
</code></pre></div>
<p>Validate your dictionary by creating a <code>NodeAttributesUniverse</code> object:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">node_attributes_universe</span> <span class="o">=</span> <span class="n">NodeAttributesUniverse</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="n">node_attributes</span><span class="p">)</span>
</code></pre></div>
<p>This dictionary of node attributes directly informs the creation of the workflow YAML without explicitly referencing specific sections of the NOMAD schema. Specification of the mainfile recognized by the NOMAD parsers is required. In this case, we also include the appropriate entry ids to link together the entries that we have already created. Detailed information about all possible attributes can be found in <a href="https://fairmat-nfdi.github.io/nomad-utility-workflows/explanation/workflows.html" target="_blank"><code>nomad-utility-workflows</code> Docs &gt; Explanation &gt; Workflows</a></p>
<p>Now, to create a graph of your workflow simply run:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">workflow_graph_input</span> <span class="o">=</span> <span class="n">nodes_to_graph</span><span class="p">(</span><span class="n">node_attributes_universe</span><span class="p">)</span>
</code></pre></div>
<p>The result can be visualized with:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">gv</span><span class="o">.</span><span class="n">d3</span><span class="p">(</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    <span class="n">workflow_graph_input</span><span class="p">,</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    <span class="n">node_label_data_source</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>    <span class="n">edge_label_data_source</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>    <span class="n">zoom_factor</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>    <span class="n">node_hover_tooltip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="p">)</span>
</code></pre></div>
<div class="click-zoom">
    <label>
        <input type="checkbox">
        <img src="../assets/workflow_graph_input.png" alt="Networkx Workflow Graph for Input" width="100%" title="Click to zoom in">
    </label>
</div>

<h2 id="generate-the-workflow-yaml">Generate the workflow yaml<a class="headerlink" href="#generate-the-workflow-yaml" title="Permanent link">&para;</a></h2>
<p>First designate the full path and filename for your YAML and a name for your workflow:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">workflow_metadata</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>    <span class="s1">&#39;destination_filename&#39;</span><span class="p">:</span> <span class="s1">&#39;./project_workflow.archive.yaml&#39;</span><span class="p">,</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    <span class="s1">&#39;workflow_name&#39;</span><span class="p">:</span> <span class="s1">&#39;NOMAD Tutorial Workflows Project&#39;</span><span class="p">,</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="p">}</span>
</code></pre></div>
<p>The workflow name will show up on top of the workflow graph visualization on the overview page of the workflow entry that we will create.</p>
<p>We can now use the generated graph to create the workflow YAML using the <code>build_nomad_workflow()</code> function:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>workflow_graph_output = build_nomad_workflow(
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>    workflow_metadata=workflow_metadata,
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>    workflow_graph=nx.DiGraph(workflow_graph_input),
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>    write_to_yaml=True,
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>)
</code></pre></div>
<p>Another workflow graph is returned by this function:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">gv</span><span class="o">.</span><span class="n">d3</span><span class="p">(</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>    <span class="n">workflow_graph_output</span><span class="p">,</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>    <span class="n">node_label_data_source</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>    <span class="n">edge_label_data_source</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>    <span class="n">zoom_factor</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>    <span class="n">node_hover_tooltip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="p">)</span>
</code></pre></div>
<div class="click-zoom">
    <label>
        <input type="checkbox">
        <img src="../assets/workflow_graph_output.png" alt="Networkx Workflow Graph Output" width="100%" title="Click to zoom in">
    </label>
</div>

<p>We see that our output graph looks signficantly different than the input. That's because <code>nomad-utility-workflow</code> is automatically adding some default inputs/outputs to ensure the proper node connections within the workflow visualizer. For nodes without an <code>entry_type</code>, these default connections work by simply adding inputs/outputs that point to the mainfile of one of the nodes connected by an edge in the graph.</p>
<details class="success">
<summary>example <code>project_workflow.archive.yaml</code></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="s">&#39;workflow2&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">  </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;NOMAD</span><span class="nv"> </span><span class="s">Tutorial</span><span class="nv"> </span><span class="s">Workflows</span><span class="nv"> </span><span class="s">Project&#39;</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">  </span><span class="s">&#39;inputs&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;Workflow</span><span class="nv"> </span><span class="s">Parameters&#39;</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">    </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/ME2oYBdiQUW4CGcG0YsGuw/archive/ujuIHCdj7StVCxbvYP7NjMvG4v22#/data&#39;</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">  </span><span class="s">&#39;outputs&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;Vibrational</span><span class="nv"> </span><span class="s">Analysis&#39;</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">    </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/yyqHpBFOSxqhrNALIJswSw/archive/zv4Q_jnvhsGry4oEyj5AC2qD103H#/data&#39;</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">system</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-1&#39;</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">    </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/JHsC4UFnRtCB9dQYR1BO6A/archive/d2ZJkTjL4LoxdFAVS8YT_jlZdzhm#/run/0/system/-1&#39;</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">calculation</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-1&#39;</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">    </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/JHsC4UFnRtCB9dQYR1BO6A/archive/d2ZJkTjL4LoxdFAVS8YT_jlZdzhm#/run/0/calculation/-1&#39;</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">system</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-2&#39;</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="w">    </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/exkqL5J8Q62ldMHbuE5tcQ/archive/zeiiGOoZL0dikRgYSvzuZZ3xPv9m#/run/0/system/-1&#39;</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">calculation</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-2&#39;</span>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="w">    </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/exkqL5J8Q62ldMHbuE5tcQ/archive/zeiiGOoZL0dikRgYSvzuZZ3xPv9m#/run/0/calculation/-1&#39;</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">system</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-3&#39;</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="w">    </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/0wUg7_GuSLiG3U1LcNlr2A/archive/8x9j0tEtx6LeGVEv7ByWD3k5VK1F#/run/0/system/-1&#39;</span>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">calculation</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-3&#39;</span>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="w">    </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/0wUg7_GuSLiG3U1LcNlr2A/archive/8x9j0tEtx6LeGVEv7ByWD3k5VK1F#/run/0/calculation/-1&#39;</span>
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="w">  </span><span class="s">&#39;tasks&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;m_def&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;nomad.datamodel.metainfo.workflow.TaskReference&#39;</span>
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a><span class="w">    </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;MD</span><span class="nv"> </span><span class="s">Setup&#39;</span>
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="w">    </span><span class="s">&#39;task&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/ME2oYBdiQUW4CGcG0YsGuw/archive/8EcTSRbvb8PiYaG_TwqAgOYiE8J7#/workflow2&#39;</span>
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="w">    </span><span class="s">&#39;inputs&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;input</span><span class="nv"> </span><span class="s">data</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">Workflow</span><span class="nv"> </span><span class="s">Parameters&#39;</span>
<a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/ME2oYBdiQUW4CGcG0YsGuw/archive/ujuIHCdj7StVCxbvYP7NjMvG4v22#/data&#39;</span>
<a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="w">    </span><span class="s">&#39;outputs&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">workflow2</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">MD</span><span class="nv"> </span><span class="s">Setup&#39;</span>
<a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/ME2oYBdiQUW4CGcG0YsGuw/archive/8EcTSRbvb8PiYaG_TwqAgOYiE8J7#/workflow2&#39;</span>
<a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;m_def&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;nomad.datamodel.metainfo.workflow.TaskReference&#39;</span>
<a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a><span class="w">    </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;MD</span><span class="nv"> </span><span class="s">Equilibration&#39;</span>
<a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a><span class="w">    </span><span class="s">&#39;task&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/7Ncu4YyXTTyTSfg0qpiziQ/archive/J3Vkhz2NAtSw4-KTnbHqUyPhhY3g#/workflow2&#39;</span>
<a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a><span class="w">    </span><span class="s">&#39;inputs&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;input</span><span class="nv"> </span><span class="s">workflow2</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">MD</span><span class="nv"> </span><span class="s">Setup&#39;</span>
<a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/ME2oYBdiQUW4CGcG0YsGuw/archive/8EcTSRbvb8PiYaG_TwqAgOYiE8J7#/workflow2&#39;</span>
<a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a><span class="w">    </span><span class="s">&#39;outputs&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">workflow2</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">MD</span><span class="nv"> </span><span class="s">Equilibration&#39;</span>
<a id="__codelineno-14-39" name="__codelineno-14-39" href="#__codelineno-14-39"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/7Ncu4YyXTTyTSfg0qpiziQ/archive/J3Vkhz2NAtSw4-KTnbHqUyPhhY3g#/workflow2&#39;</span>
<a id="__codelineno-14-40" name="__codelineno-14-40" href="#__codelineno-14-40"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;m_def&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;nomad.datamodel.metainfo.workflow.TaskReference&#39;</span>
<a id="__codelineno-14-41" name="__codelineno-14-41" href="#__codelineno-14-41"></a><span class="w">    </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;DFT-1&#39;</span>
<a id="__codelineno-14-42" name="__codelineno-14-42" href="#__codelineno-14-42"></a><span class="w">    </span><span class="s">&#39;task&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/JHsC4UFnRtCB9dQYR1BO6A/archive/d2ZJkTjL4LoxdFAVS8YT_jlZdzhm#/workflow2&#39;</span>
<a id="__codelineno-14-43" name="__codelineno-14-43" href="#__codelineno-14-43"></a><span class="w">    </span><span class="s">&#39;inputs&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-14-44" name="__codelineno-14-44" href="#__codelineno-14-44"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;input</span><span class="nv"> </span><span class="s">workflow2</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">MD</span><span class="nv"> </span><span class="s">Equilibration&#39;</span>
<a id="__codelineno-14-45" name="__codelineno-14-45" href="#__codelineno-14-45"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/7Ncu4YyXTTyTSfg0qpiziQ/archive/J3Vkhz2NAtSw4-KTnbHqUyPhhY3g#/workflow2&#39;</span>
<a id="__codelineno-14-46" name="__codelineno-14-46" href="#__codelineno-14-46"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;input</span><span class="nv"> </span><span class="s">system</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-1&#39;</span>
<a id="__codelineno-14-47" name="__codelineno-14-47" href="#__codelineno-14-47"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/JHsC4UFnRtCB9dQYR1BO6A/archive/d2ZJkTjL4LoxdFAVS8YT_jlZdzhm#/run/0/system/-1&#39;</span>
<a id="__codelineno-14-48" name="__codelineno-14-48" href="#__codelineno-14-48"></a><span class="w">    </span><span class="s">&#39;outputs&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-14-49" name="__codelineno-14-49" href="#__codelineno-14-49"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">data</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">Vibrational</span><span class="nv"> </span><span class="s">Analysis&#39;</span>
<a id="__codelineno-14-50" name="__codelineno-14-50" href="#__codelineno-14-50"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/yyqHpBFOSxqhrNALIJswSw/archive/zv4Q_jnvhsGry4oEyj5AC2qD103H#/data&#39;</span>
<a id="__codelineno-14-51" name="__codelineno-14-51" href="#__codelineno-14-51"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">system</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-1&#39;</span>
<a id="__codelineno-14-52" name="__codelineno-14-52" href="#__codelineno-14-52"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/JHsC4UFnRtCB9dQYR1BO6A/archive/d2ZJkTjL4LoxdFAVS8YT_jlZdzhm#/run/0/system/-1&#39;</span>
<a id="__codelineno-14-53" name="__codelineno-14-53" href="#__codelineno-14-53"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">calculation</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-1&#39;</span>
<a id="__codelineno-14-54" name="__codelineno-14-54" href="#__codelineno-14-54"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/JHsC4UFnRtCB9dQYR1BO6A/archive/d2ZJkTjL4LoxdFAVS8YT_jlZdzhm#/run/0/calculation/-1&#39;</span>
<a id="__codelineno-14-55" name="__codelineno-14-55" href="#__codelineno-14-55"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;m_def&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;nomad.datamodel.metainfo.workflow.TaskReference&#39;</span>
<a id="__codelineno-14-56" name="__codelineno-14-56" href="#__codelineno-14-56"></a><span class="w">    </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;DFT-2&#39;</span>
<a id="__codelineno-14-57" name="__codelineno-14-57" href="#__codelineno-14-57"></a><span class="w">    </span><span class="s">&#39;task&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/exkqL5J8Q62ldMHbuE5tcQ/archive/zeiiGOoZL0dikRgYSvzuZZ3xPv9m#/workflow2&#39;</span>
<a id="__codelineno-14-58" name="__codelineno-14-58" href="#__codelineno-14-58"></a><span class="w">    </span><span class="s">&#39;inputs&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-14-59" name="__codelineno-14-59" href="#__codelineno-14-59"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;input</span><span class="nv"> </span><span class="s">workflow2</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">MD</span><span class="nv"> </span><span class="s">Equilibration&#39;</span>
<a id="__codelineno-14-60" name="__codelineno-14-60" href="#__codelineno-14-60"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/7Ncu4YyXTTyTSfg0qpiziQ/archive/J3Vkhz2NAtSw4-KTnbHqUyPhhY3g#/workflow2&#39;</span>
<a id="__codelineno-14-61" name="__codelineno-14-61" href="#__codelineno-14-61"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;input</span><span class="nv"> </span><span class="s">system</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-2&#39;</span>
<a id="__codelineno-14-62" name="__codelineno-14-62" href="#__codelineno-14-62"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/exkqL5J8Q62ldMHbuE5tcQ/archive/zeiiGOoZL0dikRgYSvzuZZ3xPv9m#/run/0/system/-1&#39;</span>
<a id="__codelineno-14-63" name="__codelineno-14-63" href="#__codelineno-14-63"></a><span class="w">    </span><span class="s">&#39;outputs&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-14-64" name="__codelineno-14-64" href="#__codelineno-14-64"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">data</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">Vibrational</span><span class="nv"> </span><span class="s">Analysis&#39;</span>
<a id="__codelineno-14-65" name="__codelineno-14-65" href="#__codelineno-14-65"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/yyqHpBFOSxqhrNALIJswSw/archive/zv4Q_jnvhsGry4oEyj5AC2qD103H#/data&#39;</span>
<a id="__codelineno-14-66" name="__codelineno-14-66" href="#__codelineno-14-66"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">system</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-2&#39;</span>
<a id="__codelineno-14-67" name="__codelineno-14-67" href="#__codelineno-14-67"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/exkqL5J8Q62ldMHbuE5tcQ/archive/zeiiGOoZL0dikRgYSvzuZZ3xPv9m#/run/0/system/-1&#39;</span>
<a id="__codelineno-14-68" name="__codelineno-14-68" href="#__codelineno-14-68"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">calculation</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-2&#39;</span>
<a id="__codelineno-14-69" name="__codelineno-14-69" href="#__codelineno-14-69"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/exkqL5J8Q62ldMHbuE5tcQ/archive/zeiiGOoZL0dikRgYSvzuZZ3xPv9m#/run/0/calculation/-1&#39;</span>
<a id="__codelineno-14-70" name="__codelineno-14-70" href="#__codelineno-14-70"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;m_def&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;nomad.datamodel.metainfo.workflow.TaskReference&#39;</span>
<a id="__codelineno-14-71" name="__codelineno-14-71" href="#__codelineno-14-71"></a><span class="w">    </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;DFT-3&#39;</span>
<a id="__codelineno-14-72" name="__codelineno-14-72" href="#__codelineno-14-72"></a><span class="w">    </span><span class="s">&#39;task&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/0wUg7_GuSLiG3U1LcNlr2A/archive/8x9j0tEtx6LeGVEv7ByWD3k5VK1F#/workflow2&#39;</span>
<a id="__codelineno-14-73" name="__codelineno-14-73" href="#__codelineno-14-73"></a><span class="w">    </span><span class="s">&#39;inputs&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-14-74" name="__codelineno-14-74" href="#__codelineno-14-74"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;input</span><span class="nv"> </span><span class="s">workflow2</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">MD</span><span class="nv"> </span><span class="s">Equilibration&#39;</span>
<a id="__codelineno-14-75" name="__codelineno-14-75" href="#__codelineno-14-75"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/7Ncu4YyXTTyTSfg0qpiziQ/archive/J3Vkhz2NAtSw4-KTnbHqUyPhhY3g#/workflow2&#39;</span>
<a id="__codelineno-14-76" name="__codelineno-14-76" href="#__codelineno-14-76"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;input</span><span class="nv"> </span><span class="s">system</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-3&#39;</span>
<a id="__codelineno-14-77" name="__codelineno-14-77" href="#__codelineno-14-77"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/0wUg7_GuSLiG3U1LcNlr2A/archive/8x9j0tEtx6LeGVEv7ByWD3k5VK1F#/run/0/system/-1&#39;</span>
<a id="__codelineno-14-78" name="__codelineno-14-78" href="#__codelineno-14-78"></a><span class="w">    </span><span class="s">&#39;outputs&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-14-79" name="__codelineno-14-79" href="#__codelineno-14-79"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">data</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">Vibrational</span><span class="nv"> </span><span class="s">Analysis&#39;</span>
<a id="__codelineno-14-80" name="__codelineno-14-80" href="#__codelineno-14-80"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/yyqHpBFOSxqhrNALIJswSw/archive/zv4Q_jnvhsGry4oEyj5AC2qD103H#/data&#39;</span>
<a id="__codelineno-14-81" name="__codelineno-14-81" href="#__codelineno-14-81"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">system</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-3&#39;</span>
<a id="__codelineno-14-82" name="__codelineno-14-82" href="#__codelineno-14-82"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/0wUg7_GuSLiG3U1LcNlr2A/archive/8x9j0tEtx6LeGVEv7ByWD3k5VK1F#/run/0/system/-1&#39;</span>
<a id="__codelineno-14-83" name="__codelineno-14-83" href="#__codelineno-14-83"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;output</span><span class="nv"> </span><span class="s">calculation</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">DFT-3&#39;</span>
<a id="__codelineno-14-84" name="__codelineno-14-84" href="#__codelineno-14-84"></a><span class="w">      </span><span class="s">&#39;section&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;../uploads/0wUg7_GuSLiG3U1LcNlr2A/archive/8x9j0tEtx6LeGVEv7ByWD3k5VK1F#/run/0/calculation/-1&#39;</span>
</code></pre></div>
</details>
<p>Now upload, edit the metadata, and publish <code>project_workflow.archive.yaml</code> following <a href="../custom/#uploading-and-publishing">Part 3 &gt; Uploading and Publishing</a>. Browse the workflow graph of this entry to see how it links all of your uploads together. Your workflow graph should look like this:</p>
<div class="click-zoom">
    <label>
        <input type="checkbox">
        <img src="../assets/project_workflow.png" alt="Networkx Workflow Graph for Input" width="100%" title="Click to zoom in">
    </label>
</div>

<p>Now, go to <code>PUBLISH &gt; Datasets</code> and find the dataset that you created. Click the arrow to the right of this dataset and browse all the entries that it contains to make sure all of your uploads are included. Then, go back to the datasets page, and click the "assign a DOI" icon to publish your dataset.</p>
<p>That's it! You now have a persistant identifier to add to your publication in order to reference your data. Once your manuscript is accepted and receives a DOI, you can then cross-reference the manuscript by once again editing the metadata of each upload to include a reference to your paper.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../custom/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Part 3 - Custom Entries">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Part 3 - Custom Entries
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.footer", "content.code.copy", "versioning", "content.buttons"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
      
        <script src="https://unpkg.com/cytoscape@3.19.1/dist/cytoscape.min.js"></script>
      
        <script src="../assets/custom.js"></script>
      
        <script src="../javascripts/katex.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>